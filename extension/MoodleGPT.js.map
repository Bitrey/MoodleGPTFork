{"version":3,"file":"MoodleGPT.js","sources":["../src/utils/logs.ts","../src/utils/title-indications.ts","../src/core/code-listener.ts","../node_modules/tslib/tslib.es6.js","../src/types/config.ts","../src/utils/parseResponseJson.ts","../src/utils/prompt.ts","../src/core/get-response.ts","../src/utils/normalize-text.ts","../src/utils/html-table-to-string.ts","../src/utils/clearMathJax.ts","../src/core/create-question.ts","../src/core/questions/radio-checkbox.ts","../src/core/questions/clipboard.ts","../src/core/reply.ts","../src/index.ts"],"sourcesContent":["import GPTAnswer from \"../types/gptAnswer\";\r\nimport GPTQuestion from \"../types/gptQuestion\";\r\nclass Logs {\r\n  static question(question: GPTQuestion) {\r\n    const cssQ = \"color: cyan\";\r\n    const cssR = \"color: blue\";\r\n    console.log(\r\n      \"%c[QUESTION]: %s\\n%c[RESPONSES]: %s\",\r\n      cssQ,\r\n      JSON.stringify(question.question),\r\n      cssR,\r\n      question.responses.map((r, i) => `${i}: ${JSON.stringify(r)}`).join(\"\\n\"),\r\n    );\r\n  }\r\n\r\n  static responseTry(text: string, valide: boolean) {\r\n    const css = \"color: \" + (valide ? \"green\" : \"red\");\r\n    console.log(\"%c[CHECKING]: %s\", css, text);\r\n  }\r\n\r\n  static array(arr: unknown[]) {\r\n    console.log(\"[CORRECTS] \", arr);\r\n  }\r\n\r\n  static response(gptAnswer: GPTAnswer) {\r\n    if (gptAnswer.error) {\r\n      Logs.error(gptAnswer.error);\r\n      return;\r\n    }\r\n    console.log(\"Original:\", gptAnswer.rawResponse);\r\n    console.log(\"Parsed:\", gptAnswer.parsed);\r\n  }\r\n\r\n  static info(text: string, ...args: unknown[]) {\r\n    const css = \"color: blue\";\r\n    console.log(\"%c[INFO]: %s\", css, text, ...args);\r\n  }\r\n\r\n  static warn(text: string, ...args: unknown[]) {\r\n    const css = \"color: orange\";\r\n    console.warn(\"%c[WARN]: %s\", css, text, ...args);\r\n  }\r\n\r\n  static error(text: string, ...args: unknown[]) {\r\n    const css = \"color: red\";\r\n    console.error(\"%c[ERROR]: %s\", css, text, ...args);\r\n  }\r\n}\r\n\r\nexport default Logs;\r\n","/**\r\n * Show some informations into the document title and remove it after 3000ms\r\n * @param text\r\n */\r\nfunction titleIndications(text: string) {\r\n  const backTitle = document.title;\r\n  document.title = text;\r\n  setTimeout(() => (document.title = backTitle), 3000);\r\n}\r\n\r\nexport default titleIndications;\r\n","import Config from \"../types/config\";\r\nimport ReplyFn from \"../types/replyFn\";\r\nimport Logs from \"../utils/logs\";\r\nimport titleIndications from \"../utils/title-indications\";\r\n\r\nconst pressedKeys: string[] = [];\r\nconst listeners: {\r\n  element: HTMLElement;\r\n  fn: (this: HTMLElement, ev: MouseEvent) => any;\r\n}[] = [];\r\n\r\n/**\r\n * Create a listener on the keyboard to inject the code\r\n * @param config\r\n */\r\nfunction codeListener(config: Config, replyFn: ReplyFn) {\r\n  document.body.addEventListener(\"keydown\", function (event) {\r\n    pressedKeys.push(event.key);\r\n    if (pressedKeys.length > config.code.length) pressedKeys.shift();\r\n\r\n    const fast = pressedKeys.join(\"\") === config.code;\r\n    const smart = pressedKeys.join(\"\") === config.codeSmart;\r\n\r\n    if (fast || smart) {\r\n      pressedKeys.length = 0;\r\n      setUpMoodleGpt(config, replyFn, smart);\r\n    }\r\n\r\n    if (config.logs) {\r\n      Logs.info(\"Pressed keys:\", pressedKeys);\r\n      Logs.info(\"Fast:\", fast);\r\n      Logs.info(\"Smart:\", smart);\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * Setup moodleGPT into the page (remove/injection)\r\n * @param config\r\n * @param replyFn\r\n * @param smart\r\n * @returns\r\n */\r\nfunction setUpMoodleGpt(config: Config, replyFn: ReplyFn, smart: boolean) {\r\n  /* Removing events */\r\n  if (listeners.length > 0) {\r\n    for (const listener of listeners) {\r\n      if (config.cursor) listener.element.style.cursor = \"initial\";\r\n      listener.element.removeEventListener(\"click\", listener.fn);\r\n    }\r\n    if (config.title) titleIndications(\"Removed\");\r\n    listeners.length = 0;\r\n    return;\r\n  }\r\n\r\n  /* Code injection */\r\n  const inputQuery = [\"checkbox\", \"radio\", \"text\", \"number\"]\r\n    .map((e) => `input[type=\"${e}\"]`)\r\n    .join(\",\");\r\n  const query = inputQuery + \", textarea, select, [contenteditable]\";\r\n  const forms = document.querySelectorAll(\".formulation\");\r\n\r\n  if (config.logs) {\r\n    Logs.info(\"MoodleGPT is running\");\r\n    // Logs.info(\"Query:\", query);\r\n    Logs.info(\"Forms:\", forms);\r\n  }\r\n\r\n  for (const form of forms) {\r\n    const questionElem: HTMLElement = form.querySelector(\".qtext\");\r\n\r\n    if (config.cursor) questionElem.style.cursor = \"pointer\";\r\n\r\n    const injectionFunction = replyFn.bind(\r\n      null,\r\n      config,\r\n      questionElem,\r\n      form as HTMLElement,\r\n      query,\r\n      smart,\r\n    );\r\n    Logs.info(\"Injection function:\", injectionFunction);\r\n    Logs.info(\"Smart:\", smart);\r\n    listeners.push({ element: questionElem, fn: injectionFunction });\r\n    questionElem.addEventListener(\"click\", injectionFunction);\r\n\r\n    if (config.logs) {\r\n      Logs.info(\"Listener added on:\", questionElem);\r\n    }\r\n  }\r\n\r\n  if (config.title) titleIndications(\"Injected\");\r\n\r\n  if (config.logs) {\r\n    Logs.info(\"Listeners:\", listeners);\r\n    Logs.info(\"Pressed keys:\", pressedKeys);\r\n  }\r\n}\r\n\r\n/**\r\n * Remove the event listener on a specific question\r\n * @param element\r\n */\r\nfunction removeListener(element: HTMLElement) {\r\n  const index = listeners.findIndex((listener) => listener.element === element);\r\n  if (index !== -1) {\r\n    const listener = listeners.splice(index, 1)[0];\r\n    listener.element.removeEventListener(\"click\", listener.fn);\r\n  }\r\n}\r\n\r\nexport { codeListener, removeListener };\r\n","/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.unshift(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.unshift(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n\r\nexport function __addDisposableResource(env, value, async) {\r\n    if (value !== null && value !== void 0) {\r\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\r\n        var dispose;\r\n        if (async) {\r\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\r\n            dispose = value[Symbol.asyncDispose];\r\n        }\r\n        if (dispose === void 0) {\r\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\r\n            dispose = value[Symbol.dispose];\r\n        }\r\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\r\n        env.stack.push({ value: value, dispose: dispose, async: async });\r\n    }\r\n    else if (async) {\r\n        env.stack.push({ async: true });\r\n    }\r\n    return value;\r\n}\r\n\r\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\r\n\r\nexport function __disposeResources(env) {\r\n    function fail(e) {\r\n        env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\r\n        env.hasError = true;\r\n    }\r\n    function next() {\r\n        while (env.stack.length) {\r\n            var rec = env.stack.pop();\r\n            try {\r\n                var result = rec.dispose && rec.dispose.call(rec.value);\r\n                if (rec.async) return Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\r\n            }\r\n            catch (e) {\r\n                fail(e);\r\n            }\r\n        }\r\n        if (env.hasError) throw env.error;\r\n    }\r\n    return next();\r\n}\r\n\r\nexport default {\r\n    __extends: __extends,\r\n    __assign: __assign,\r\n    __rest: __rest,\r\n    __decorate: __decorate,\r\n    __param: __param,\r\n    __metadata: __metadata,\r\n    __awaiter: __awaiter,\r\n    __generator: __generator,\r\n    __createBinding: __createBinding,\r\n    __exportStar: __exportStar,\r\n    __values: __values,\r\n    __read: __read,\r\n    __spread: __spread,\r\n    __spreadArrays: __spreadArrays,\r\n    __spreadArray: __spreadArray,\r\n    __await: __await,\r\n    __asyncGenerator: __asyncGenerator,\r\n    __asyncDelegator: __asyncDelegator,\r\n    __asyncValues: __asyncValues,\r\n    __makeTemplateObject: __makeTemplateObject,\r\n    __importStar: __importStar,\r\n    __importDefault: __importDefault,\r\n    __classPrivateFieldGet: __classPrivateFieldGet,\r\n    __classPrivateFieldSet: __classPrivateFieldSet,\r\n    __classPrivateFieldIn: __classPrivateFieldIn,\r\n    __addDisposableResource: __addDisposableResource,\r\n    __disposeResources: __disposeResources,\r\n};\r\n","export const subject = \"Numerical Analysis\";\n\ntype Config = {\n  apiKey: string;\n  code: string;\n  codeSmart: string;\n  model?: string;\n  modelSmart?: string;\n  models?: string[];\n  infinite?: boolean;\n  typing?: boolean;\n  mouseover?: boolean;\n  cursor?: boolean;\n  logs?: boolean;\n  title?: boolean;\n  timeout?: boolean;\n  mode?: \"autocomplete\" | \"question-to-answer\" | \"clipboard\";\n};\n\nexport default Config;\n","import GPTAnswer, { ParsedGPTAnswer } from \"../types/gptAnswer\";\nimport Logs from \"./logs\";\n\n/**\n * Parse ChatGPT raw response\n * @param response - The raw response\n * @returns The parsed response\n */\nfunction parseResponseJson(response: string): GPTAnswer {\n  // first, try a normal JSON parse\n  let parsed: ParsedGPTAnswer | null = null;\n\n  response = response.trim();\n\n  try {\n    parsed = JSON.parse(response);\n\n    if (!Number.isInteger(parsed.guess)) {\n      throw new Error(\"Guess is not an integer\");\n    }\n  } catch (e) {\n    Logs.warn(\"Failed to parse JSON response:\", e);\n  }\n\n  // if that fails, maybe it's <text>```json\\n{...}```<text>\n  if (!parsed) {\n    const match = response.match(/```json\\n(.*)```/s);\n    if (match) {\n      try {\n        parsed = JSON.parse(match[1]);\n\n        if (!Number.isInteger(parsed.guess)) {\n          throw new Error(\"Guess is not an integer\");\n        }\n      } catch (e) {\n        Logs.warn(\"Failed to parse JSON response:\", e);\n      }\n    }\n  }\n\n  // if that fails, maybe it's <text><pre>{...}</pre><text>\n  if (!parsed) {\n    const match = response.match(/<pre>(.*)<\\/pre>/s);\n    if (match) {\n      try {\n        parsed = JSON.parse(match[1]);\n\n        if (!Number.isInteger(parsed.guess)) {\n          throw new Error(\"Guess is not an integer\");\n        }\n      } catch (e) {\n        Logs.warn(\"Failed to parse JSON response:\", e);\n      }\n    }\n  }\n\n  // if that fails, maybe it's <text>{...}</text>\n  if (!parsed) {\n    const match = response.match(/>(.*)</s);\n    if (match) {\n      try {\n        parsed = JSON.parse(match[1]);\n\n        if (!Number.isInteger(parsed.guess)) {\n          throw new Error(\"Guess is not an integer\");\n        }\n      } catch (e) {\n        Logs.warn(\"Failed to parse JSON response:\", e);\n      }\n    }\n  }\n\n  // if that fails, maybe it's <text>{...}</text>\n  if (!parsed) {\n    const match = response.match(/{.*}/s);\n    for (const m of match) {\n      try {\n        parsed = JSON.parse(m);\n\n        if (Number.isInteger(parsed.guess)) {\n          break;\n        }\n      } catch (e) {\n        Logs.warn(\"Failed to parse JSON response:\", e);\n      }\n    }\n  }\n\n  // if that fails, find \"guess\" and parse from { to }\n  if (!parsed) {\n    const match = response.match(/\"guess\":\\s*(\\d+)/);\n    if (match) {\n      const num = match[0].split(\":\")[1].trim();\n      const guess = parseInt(num, 10);\n      parsed = { guess };\n    }\n  }\n\n  if (!parsed) {\n    Logs.error(\"Failed to parse JSON: \" + response);\n  } else {\n    Logs.info(\"Successfully parsed response:\", response);\n  }\n\n  return {\n    rawResponse: response,\n    parsed,\n    error: parsed ? null : \"Failed to parse JSON response\",\n  };\n}\n\nexport default parseResponseJson;\n","import GPTQuestion from \"../types/gptQuestion\";\n\n/**\n * Get system prompt\n * @returns {string} The system prompt\n */\nexport function getSystemPrompt(): string {\n  return `\n  This is a prompt for an artificial intelligence that tries to guess the correct answer to a multiple-choice question, given as input by the user in JSON format.\n  Input: a question and numbered responses, formatted in JSON as {\"question\": \"<string>\", \"responses\": [\"<string>\", ...]}, with math formulas in MathJax format.\n  Output: the answer that the AI thinks is correct, in JSON format as follows: { \"guess\": <number> }, with <number> index of the responses array. The output must not contain any additional text.\n      `.trim();\n}\n\n/**\n * Get safe system prompt\n * @returns {string} The system prompt\n */\nexport function getSafeSystemPrompt(subject: string): string {\n  return `\n  You are a teacher of ${subject}. You are preparing a multiple-choice test for your students,\n  and you are writing the questions and the answers in a Moodle quiz.\n  Your task is to write an explanation for each question, so that the students can understand why the correct answer is correct.\n  At the end of the explanation, you must write the correct answer, in JSON format as follows: { \"guess\": <number> }, with <number> index of the responses array.\n  The user will now input a question and numbered responses, formatted in JSON as {\"question\": \"<string>\", \"responses\": [\"<string>\", ...]}, with math formulas in MathJax format.\n      `.trim();\n}\n\n/**\n * Get ChatGPT prompt\n * @param question - The question\n * @param responses - Array of responses\n * @returns {string} The ChatGPT prompt\n */\nfunction getPrompt(gptQuestion: GPTQuestion): string {\n  return JSON.stringify(\n    {\n      question: gptQuestion.question,\n      responses: gptQuestion.responses,\n    },\n    null,\n    4,\n  ).replace(/\\\\\\\\/g, \"\\\\\");\n}\n\nexport default getPrompt;\n","import Config, { subject } from \"../types/config\";\r\nimport GPTAnswer from \"../types/gptAnswer\";\r\nimport parseResponseJson from \"../utils/parseResponseJson\";\r\nimport { getSafeSystemPrompt, getSystemPrompt } from \"../utils/prompt\";\r\n\r\n/**\r\n * Get the response from chatGPT api\r\n * @param config\r\n * @param question\r\n * @param smart\r\n * @returns\r\n */\r\nasync function getChatGPTResponse(\r\n  config: Config,\r\n  userPrompt: string,\r\n  smart: boolean,\r\n): Promise<GPTAnswer> {\r\n  const controller = new AbortController();\r\n  // DEBUG: timeout now at 150s\r\n  const timeoutControler = setTimeout(() => controller.abort(), 150000);\r\n  const req = await fetch(\"https://api.openai.com/v1/chat/completions\", {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${config.apiKey}`,\r\n    },\r\n    signal: config.timeout ? controller.signal : null,\r\n    body: JSON.stringify({\r\n      model: config.model,\r\n      messages: [\r\n        {\r\n          role: \"system\",\r\n          content: smart ? getSafeSystemPrompt(subject) : getSystemPrompt(),\r\n        },\r\n        { role: \"user\", content: userPrompt },\r\n      ],\r\n      temperature: 0.8,\r\n      top_p: 1.0,\r\n      presence_penalty: 1.0,\r\n      stop: null,\r\n    }),\r\n  });\r\n  clearTimeout(timeoutControler);\r\n  const rep = await req.json();\r\n  const response = rep.choices[0].message.content;\r\n  return parseResponseJson(response);\r\n}\r\n\r\nexport default getChatGPTResponse;\r\n","/**\r\n * Normlize text\r\n * @param text\r\n */\r\nfunction normalizeText(\r\n  text: string,\r\n  toLowerCase = false,\r\n  replaceSingleLine = false,\r\n) {\r\n  let normalizedText = text\r\n    .replace(/\\n+/gi, \"\\n\") //remove duplicate new lines\r\n    .replace(/(\\n\\s*\\n)+/g, \"\\n\") //remove useless white sapce from textcontent\r\n    .replace(/[ \\t]+/gi, \" \"); //replace multiples space or tabs by a space\r\n\r\n  if (toLowerCase) normalizedText = normalizedText.toLowerCase();\r\n\r\n  if (replaceSingleLine) {\r\n    normalizedText = normalizedText.replace(/\\n/gi, \"\");\r\n  }\r\n\r\n  return (\r\n    normalizedText\r\n      .trim()\r\n      /* We remove that because sometimes ChatGPT will reply: \"answer d\" */\r\n      .replace(/^[a-z\\d]\\.\\s/gi, \"\") //a. text, b. text, c. text, 1. text, 2. text, 3.text\r\n      .replace(/\\n[a-z\\d]\\.\\s/gi, \"\\n\") //same but with new line\r\n  );\r\n}\r\n\r\nexport default normalizeText;\r\n","/**\n * Convert table to representating string table\n * @param table\n * @returns\n */\nfunction htmlTableToString(table: HTMLTableElement) {\n  const tab: string[][] = [];\n  const lines = Array.from(table.querySelectorAll(\"tr\"));\n  const maxColumnsLength: number[] = [];\n  lines.map((line) => {\n    const cells = Array.from(line.querySelectorAll(\"td, th\"));\n    const cellsContent = cells.map((cell, index) => {\n      const content = cell.textContent?.trim();\n      maxColumnsLength[index] = Math.max(\n        maxColumnsLength[index] || 0,\n        content.length || 0\n      );\n      return content;\n    });\n    tab.push(cellsContent);\n  });\n\n  const lineSeparationSize =\n    maxColumnsLength.reduce((a, b) => a + b) + tab[0].length * 3 + 1;\n  const lineSeparation =\n    \"\\n\" + Array(lineSeparationSize).fill(\"-\").join(\"\") + \"\\n\";\n\n  const mappedTab = tab.map((line) => {\n    const mappedLine = line.map((content, index) =>\n      content.padEnd(\n        maxColumnsLength[index],\n        \"\\u00A0\" /* For no matching with \\s */\n      )\n    );\n    return \"| \" + mappedLine.join(\" | \") + \" |\";\n  });\n  const head = mappedTab.shift();\n  return head + lineSeparation + mappedTab.join(\"\\n\");\n}\n\nexport default htmlTableToString;\n","import Logs from \"./logs\";\n\n/**\n * Clear MathJax elements\n * @param element - The element to clear\n * @returns The cleared element\n */\nfunction clearMathJax(_element: HTMLElement): HTMLElement {\n  const element = _element.cloneNode(true) as HTMLElement;\n\n  const mathJaxElements: NodeListOf<HTMLElement> =\n    element.querySelectorAll(\".MathJax\");\n\n  for (const mathJaxElement of mathJaxElements) {\n    let scriptElement = mathJaxElement.nextElementSibling;\n    if (!scriptElement) {\n      // try next next sibling of parent\n      scriptElement = mathJaxElement.parentElement?.nextElementSibling;\n    }\n    if (scriptElement) {\n      // DEBUG\n      Logs.info(\"MathJax script:\", scriptElement);\n      mathJaxElement.textContent = scriptElement.textContent;\n      scriptElement.remove();\n    } else {\n      Logs.error(\"MathJax script not found:\", mathJaxElement);\n    }\n  }\n\n  return element;\n}\n\nexport default clearMathJax;\n","import Config from \"../types/config\";\nimport normalizeText from \"../utils/normalize-text\";\nimport htmlTableToString from \"../utils/html-table-to-string\";\nimport Logs from \"../utils/logs\";\nimport clearMathJax from \"../utils/clearMathJax\";\nimport GPTQuestion from \"../types/gptQuestion\";\n\n/**\n * Normalize the question and add sub informations\n * @param langage\n * @param question\n * @param answers\n * @returns\n */\nfunction createQuestion(\n  config: Config,\n  _questionContainer: HTMLElement,\n  formContainer: HTMLElement,\n): GPTQuestion {\n  if (config.logs) {\n    Logs.info(\"Question container:\", _questionContainer);\n    Logs.info(\"Answers container:\", formContainer);\n  }\n\n  const questionContainer = clearMathJax(_questionContainer);\n\n  // extract .answernumber <span>s, get div after\n  const _answerElements: NodeListOf<HTMLElement> =\n    formContainer.querySelectorAll(\".answernumber + div\");\n  const answerElements: HTMLElement[] = [];\n  for (const answerElement of _answerElements) {\n    answerElements.push(clearMathJax(answerElement));\n  }\n\n  let question = questionContainer.innerText;\n\n  if (config.logs) Logs.info(\"Question:\", question);\n\n  /* We remove unnecessary information */\n  const accesshideElements: NodeListOf<HTMLElement> =\n    formContainer.querySelectorAll(\".accesshide\");\n  for (const useless of accesshideElements) {\n    question = question.replace(useless.innerText, \"\");\n  }\n\n  /* Make tables more readable for chat-gpt */\n  const tables: NodeListOf<HTMLTableElement> =\n    formContainer.querySelectorAll(\".qtext table\");\n  for (const table of tables) {\n    question = question.replace(\n      table.innerText,\n      \"\\n\" + htmlTableToString(table) + \"\\n\",\n    );\n  }\n\n  return {\n    question: normalizeText(question),\n    responses: Array.from(answerElements).map((e) =>\n      normalizeText(e.innerText),\n    ),\n  };\n}\n\nexport default createQuestion;\n","import Config from \"../../types/config\";\r\nimport GPTAnswer from \"../../types/gptAnswer\";\r\nimport Logs from \"../../utils/logs\";\r\nimport normalizeText from \"../../utils/normalize-text\";\r\n\r\n/**\r\n * Handle checkbox and input elements\r\n * @param config\r\n * @param answersElem\r\n * @param inputList\r\n * @param gptAnswer\r\n */\r\nfunction handleRadioAndCheckbox(\r\n  config: Config,\r\n  answersElem: HTMLElement,\r\n  inputList: NodeListOf<HTMLElement>,\r\n  gptAnswer: GPTAnswer,\r\n): boolean {\r\n  // const input: HTMLInputElement = inputList?.[0];\r\n\r\n  // if (!input || (input.type !== \"checkbox\" && input.type !== \"radio\"))\r\n  //   return false;\r\n\r\n  // for (const input of inputList as NodeListOf<HTMLInputElement>) {\r\n  //   if (config.logs) {\r\n  //     Logs.info(\r\n  //       `Trying to check input with value ${input.value} and name ${input.name}`,\r\n  //     );\r\n  //   }\r\n\r\n  //   const content = normalizeText(input.parentNode.textContent);\r\n  //   const valide = gptAnswer.normalizedResponse.includes(content);\r\n  //   if (config.logs) Logs.responseTry(content, valide);\r\n  //   if (valide) {\r\n  //     if (config.mouseover) {\r\n  //       input.addEventListener(\"mouseover\", () => (input.checked = true), {\r\n  //         once: true,\r\n  //       });\r\n  //     } else {\r\n  //       input.checked = true;\r\n  //     }\r\n  //   }\r\n  // }\r\n  if (typeof gptAnswer.parsed.guess !== \"number\") return false;\r\n\r\n  // select radio inputs, check if value === gptAnswer.guess\r\n  answersElem\r\n    .querySelectorAll(\"input[type=radio]\")\r\n    .forEach((input: HTMLInputElement) => {\r\n      if (input.value.toString() === gptAnswer.parsed.guess.toString()) {\r\n        input.checked = true;\r\n      }\r\n    });\r\n\r\n  return true;\r\n}\r\n\r\nexport default handleRadioAndCheckbox;\r\n","import Config from \"../../types/config\";\r\nimport GPTAnswer from \"../../types/gptAnswer\";\r\nimport titleIndications from \"../../utils/title-indications\";\r\n\r\n/**\r\n * Copy the response in the clipboard if we can automaticaly fill the question\r\n * @param config\r\n * @param gptAnswer\r\n */\r\nfunction handleClipboard(config: Config, gptAnswer: GPTAnswer) {\r\n  if (config.title) titleIndications(\"Copied to clipboard\");\r\n  // TODO change to make it work with not-choose-one questions\r\n  navigator.clipboard.writeText(gptAnswer.parsed.guess.toString());\r\n}\r\n\r\nexport default handleClipboard;\r\n","import Config from \"../types/config\";\r\nimport ReplyFn from \"../types/replyFn\";\r\nimport Logs from \"../utils/logs\";\r\nimport getChatGPTResponse from \"./get-response\";\r\nimport createQuestion from \"./create-question\";\r\nimport handleRadioAndCheckbox from \"./questions/radio-checkbox\";\r\n// import handleSelect from \"./questions/select\";\r\n// import handleTextbox from \"./questions/textbox\";\r\nimport handleClipboard from \"./questions/clipboard\";\r\n// import handleNumber from \"./questions/number\";\r\n// import handleContentEditable from \"./questions/contenteditable\";\r\nimport { removeListener } from \"./code-listener\";\r\nimport getPrompt from \"../utils/prompt\";\r\nimport GPTAnswer from \"../types/gptAnswer\";\r\n\r\n/**\r\n * Reply to the question\r\n * @param config\r\n * @param questionElem\r\n * @param form\r\n * @param query\r\n * @returns\r\n */\r\nconst reply: ReplyFn = async function (\r\n  config: Config,\r\n  questionElem: HTMLElement,\r\n  form: HTMLElement,\r\n  query: string,\r\n  smart: boolean,\r\n) {\r\n  if (config.cursor) questionElem.style.cursor = \"wait\";\r\n\r\n  const question = createQuestion(config, questionElem, form);\r\n  const inputList: NodeListOf<HTMLElement> = form.querySelectorAll(query);\r\n  const answer: HTMLElement = form.querySelector(\".answer\");\r\n\r\n  if (config.logs) {\r\n    Logs.question(question);\r\n  }\r\n\r\n  let gptAnswer: GPTAnswer;\r\n  try {\r\n    const prompt = getPrompt(question);\r\n    if (config.logs) {\r\n      Logs.info(\"Prompt:\", prompt);\r\n    }\r\n    gptAnswer = await getChatGPTResponse(config, prompt, smart);\r\n  } catch (err) {\r\n    Logs.error(\"Error while getting response from ChatGPT API:\", err);\r\n    return null;\r\n  }\r\n\r\n  const haveError = gptAnswer.parsed === undefined || gptAnswer.error !== null;\r\n\r\n  if (config.cursor)\r\n    questionElem.style.cursor =\r\n      config.infinite || haveError ? \"pointer\" : \"initial\";\r\n\r\n  if (haveError) {\r\n    Logs.error(\"GPT answer error:\", gptAnswer.error);\r\n    return null;\r\n  }\r\n\r\n  if (config.logs) {\r\n    Logs.response(gptAnswer);\r\n  }\r\n\r\n  /* Handle clipboard mode */\r\n  // if (config.mode === \"clipboard\") {\r\n  //   if (!config.infinite) removeListener(questionElem);\r\n  //   handleClipboard(config, gptAnswer);\r\n  //   return null;\r\n  // }\r\n\r\n  /* Handle question to answer mode */\r\n  // if (config.mode === \"question-to-answer\") {\r\n  //   removeListener(questionElem);\r\n\r\n  //   const questionContainer = form.querySelector<HTMLElement>(\".qtext\");\r\n  //   const questionBackup = questionContainer.textContent;\r\n\r\n  //   questionContainer.textContent = gptAnswer.response;\r\n  //   questionContainer.style.whiteSpace = \"pre-wrap\";\r\n\r\n  //   questionContainer.addEventListener(\"click\", function () {\r\n  //     const isNotResponse = questionContainer.textContent === questionBackup;\r\n  //     questionContainer.style.whiteSpace = isNotResponse ? \"pre-wrap\" : null;\r\n  //     questionContainer.textContent = isNotResponse\r\n  //       ? gptAnswer.response\r\n  //       : questionBackup;\r\n  //   });\r\n  //   return null;\r\n  // }\r\n\r\n  /* Better then set once on the event because if there is an error the user can click an other time on the question */\r\n  if (!config.infinite) removeListener(questionElem);\r\n\r\n  const handlers = [\r\n    // handleContentEditable,\r\n    // handleTextbox,\r\n    // handleNumber,\r\n    // handleSelect,\r\n    handleRadioAndCheckbox,\r\n  ];\r\n\r\n  for (const handler of handlers) {\r\n    if (handler(config, answer, inputList, gptAnswer)) return null;\r\n  }\r\n\r\n  /* In the case we can't auto complete the question */\r\n  handleClipboard(config, gptAnswer);\r\n};\r\n\r\nexport default reply;\r\n","import { codeListener } from \"./core/code-listener\";\r\nimport reply from \"./core/reply\";\r\nimport Config from \"./types/config\";\r\nimport Logs from \"./utils/logs\";\r\n\r\nchrome.storage.sync.get([\"moodleGPT\"]).then(function (storage) {\r\n  const config: Config | undefined = storage.moodleGPT;\r\n\r\n  if (!config) throw new Error(\"Please configure MoodleGPT into the extension\");\r\n\r\n  if (config.logs) {\r\n    Logs.info(\r\n      `Started MoodleGPT with model ${config.model} and code ${config.code}`,\r\n    );\r\n  }\r\n\r\n  codeListener(config, reply);\r\n});\r\n"],"names":[],"mappings":"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","x_google_ignoreList":[3]}